Essential Google Cloud Infrastructure: Foundation

Layman's Term of the following:
Cloud Infrastructure
Imagine you're in a City. - The infrastructure is the basic facilities and sys such as
electricity, communications, water, fuel, sewerage systems. - The people are the end users - The cars, bikes, motorcycle and buildings like a mall/restaurant are the applications

Container - portable box which contains an app

Kubernetes - ochestrate code in containers

Module 1: Interacting with Google Cloud

Learning Objectives 1. List the different ways of interacting with Google Cloud 2. Interact with the Google Cloud console and Cloud Shell 3. Create Cloud Storage buckets 4. Deploy solutions using Google Cloud Marketplace

Using Google Cloud
Ways to Interact with Google Cloud 1. Google Cloud console - Web user interface

    	2. Cloud Shell and Google Cloud CLI/SDK/gcloud
    		- CLI

    		Cloud shell
    			- Temporary Compute Engine VM
    			- Command-line access to the instance via a browser
    			- 5 GB of persistent disk storage ($HOME dir)
    			- Pre-installed Cloud SDK and other tools
    			- gcloud: for working with Compute Engine and many Google Cloud services
    			- gcloud storage: for working with Cloud Storage
    			- kubectl: for working with Google Kubernetes Engine and Kubernetes
    			- bq: for working with BigQuery
    			- Language support for Java, Go, Python, Node.js, PHP, and Ruby
    			- Web preview functionality
    			- Built-in authorization for access to resources and instances

    	3. Rest-based API
    		- For custom applications

    		Restful API
    			- get/post/put/delete
    			- JSON

    		Two pupose why google cloud client Librariers exposes APIs
    			App APIs
    				- provide access to services

    			Admin APIs
    				- functionality for resource management
    				- build auttomated tools

    	4. Cloud Mobile App
    		- For iOS and Android

    		Features:
    			- manage VM and DB instances
    			- manage apps in app engine
    			- manage your billing
    			- Visualize projects w/ customizable dashboard

    Qwiklabs - Working with Google Cloud Console and Cloud Shell

    	Objectives:
    		- Get access to Google Cloud
    		- Create a GCS using the google cloud console
    		- Create a GCS bucket using cloud shell
    		- Become familiar with Cloud shell features

    	Create a GCS bucket using cloud shell
    		//Create GCS bucket
    			gcloud storage buckets create gs://[BUCKET_NAME]

    		//upload my local file to GCS bucket
    			gcloud storage cp [MY_FILE] gs://[BUCKET_NAME]

    			//if file name has spaces
    				gcloud storage cp â€˜my file.txt' gs://[BUCKET_NAME]

    	Create a persistent state in Cloud Shell
    		//list current config
    			gcloud config list

    		//config set project
    			gcloud config set project

    		//list all available regions
    			gcloud compute regions list

    		config file
    			REGION=asia-southeast1
    			PROJ_ID=realve-study

    		.profile
    			source config

    		To create a persistent state in Cloud Shell, which file would you configure?
    			-.profile

    Qwiklabs - Infrastructure Preview

    	Objectives
    		- Use Marketplace to build a Jenkins Continuous Integration environment.
    		- Verify that you can manage the service from the Jenkins UI.
    		- Administer the service from the Virtual Machine host through SSH.

    	Google Cloud Marketplace lets you quickly deploy functional software packages by providing pre-defined templates with which Google Cloud service?
    		- Deployment Manager
    			- acquiring a virtual machine instance and installing and configuring software for you.
    			- Google Cloud service that uses templates written in a combination of YAML, python, and Jinja2 to automate the allocation of Google Cloud resources and perform setup tasks
    			Behind the scenes created
    				- VM
    					- startup script to install and config software
    					- network FW rules to allow traffic to the sercvice

    		Shut down and restart Jenkins service
    			sudo /opt/bitnami/ctlscript.sh stop
    			sudo /opt/bitnami/ctlscript.sh restart

Quiz

1. Which of the following does not allow you to interact with Google CLoud?

   - Cloud Explorer

2. What is the difference between the Google Cloud Console and Cloud Shell?
   - Cloud Shell is a command-line tool, while the Cloud Console is a graphical user interface

Module 2: Virtual Networks

Learning Objectives 1. List the VPC objects in Google Cloud 2. Explore VPC Networking. 3. Implement Private Google Access and Cloud NAT

VPC - an isolated/private network where you can define IP address range to be used for your resources

Projects, Networks and Subnetworks

    Projects
    	- associates objects and services with billing
    	- 15 networks

    Networks
    	- can be shared with outher projects or be peered with VPC peering

    	CIDR(classless inter-domain routing)
    		- ways of splitting network to a smaller network called subnet
    		- method for allocating IP addr

    Types
    	Default
    		- every project
    		- one subnet per region
    		- default firewall rules

    		Auto Mode
    			- Default network
    			- one subnet per region
    			- regional IP allocation
    			- fixed /20 subnet per region
    			- expandable upto /16

    	Custom Mode
    		- no default subnets created
    		- full control of IP ranges
    		- Regional IP allocation
    		- Expandable to IP ranges

    Subnetworks
    	- smaller network from splitted network
    	- works on regional level
    	- cross zone is possible
    		- single FW rule can be applied to both VMs
    	- 4 reserves IP addrs compares to AW which has 5
    		- first
    			- network addr
    		- second
    			- subnet's gateway
    		- last
    			- broadcast addr
    		- ip before last
    			- - broadcast addr

    	-subnet mask
    		- allows part of undelying IP to get add next values from next base IP

    		Rules
    			- cannot overlap with other subnets
    			- ip range must be unique valid CIDR block
    			- new subnet IP ranges have to all within valid IP ranges
    			- can expand but not shrink
    			- auto mode can be expanded from /20 to /16

    Notes
    	- Same VMs located in same network can communicate using private addr
    	- Two VMs in different network can comm with their private addr if using Google Edge routers/VPN
    		- diff bill and security risks

    Expand Subnet
    	- change sider notation to lesser number

    	/29
    		4 instances

    	/24
    		256-4= 252 instances

    	/23
    		508 instances

IP Addresses
Internal IP - allocated from subnet range to VMs by DHCP
DHCP(Dynamic Host Configuration Protocol) - allows hosts to automatically learn various netwokr w/o manual static config - automatically learn address of DNS server - DHCP lease is renewed every 24 hrs - VM name + IP is registered with network-scoped DNS - IPV4 ranges
10.0.0.0/8
10.0.0.0 to 10.255.255.255
172.16.0.0/12
172.16.0.0 to 172.31.255.255
192.168.0.0/16
192.168.0.0 to 192.168.255.255

    External IP
    	- assigned from pool(ephemeral/temporary)
    	- reserved(static)
    	- bring your own IP address(BYOIP)
    	- VM doesn't know external IP
    		- It is mapped to the internal IP

    Quotas/limits of instance per network
    	- 15,000 VM

Maopping IP addresses
External IPs are mapped to internal IP

    Two types of internal DNS
    	- Zonal(preferred)
    	- Global

    Note
    	- DNS name always poins to specific instance no matterr what internal IP addr is.

    Cloud DNS
    	- google's DNS service
    	- 100& uptome SLA
    	- create and update millions of DNS records

    Alias IP range
    	When to use
    		- multiple service running on a VM and want assigh diff IP addr to each service

Routes and Firewall Rules
Cloud Routes - defines the paths that network traffic takes from a virtual machine (VM) instance to other destination(same VPC network or outside).

    GCP Firewall Rules/Security group
    	- stateful that allow/deny connections to or from your VM instances
    	- Ipmlied deny all ingress and allow all egress by default
    	- applited tot he network as a whole

    	Use case(Egress)
    		- Going out
    		- VM to internet
    		- VM to VM

    		Conditions
    			- Desination CIDR ranges
    			- Protocols
    			- Ports

    		Action:
    			Allow
    				- permit the matching egress connection

    			Deny
    				- block the matching egress connection

    	Use case(Egress)
    		- Going in
    		- internet to VM
    		- VM to VM

    		Conditions
    			- Source CIDR ranges
    			- Protocols
    			- Ports

    		Action:
    			Allow
    				- permit the matching egress connection

    			Deny
    				- block the matching egress connection

Pricing
Network Pricing
No charge - Ingress - egress to same zone(internal IP) - egress to google products like maps/drive/youtube - egress to dif cloud service within same region - Staic and ephemeral external IP addr atttached to forwarding rules used by Cloud NAT/VPN tunnel

    	Charge
    		- egress to same zome(External IP per GB)
    		- egress bet regions within US and CANADA(per GB)
    		- egress between zones in the same region(per GB)
    		- static external IP addr assigned but unused
    		- static and ephemeral external IP addr used on standard VM instances
    		- static and ephemeral IP add in use on preemptible VM instance

    Note
    	Use Google CLoud Pricing Calculator

    Qwiklabs - VPC Networking

    Objectives
    	In this lab, you learn how to perform the following tasks:

    	1. Explore the default VPC network
    	2. Create an auto mode network with firewall rules
    	3. Convert an auto mode network to a custom mode network
    	4. Create custom mode VPC networks with firewall rules
    	5. Create VM instances using Compute Engine
    	6. Explore the connectivity for VM instances across VPC networks

    Without a VPC network, you cannot create VM instances, containers, or App Engine applications.
    	- True


    Which firewall rule allows the ping to mynet-eu-vm's external IP address?
    	- allow imcp


Common Network Designs
Qwiklabs - Implement Private Google Access and Cloud NAT

Module 3: Virtual Machines

Essential Google Cloud Infrastructure: Core Services

Module 1 - Identity and Access Management(IAM)

Module 2 - Data Storage Services

Module 3 - Resource Management

Module 4 - Resource Monitoring

Essential Google Cloud Infrastructure: Scaling and Automation

Module 1 - Interconnecting Networks

Module 2 - Load Balancing and Autoscaling

Module 3 - Infrastructure Automation

Module 4 - Managed Services
